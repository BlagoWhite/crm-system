(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{264:function(e,r,t){Promise.resolve().then(t.bind(t,1202))},1202:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var a=t(7437),n=t(2265),s=t(9376),i=t(7648),o=t(8123);function l(){let e=(0,s.useRouter)(),[r,t]=(0,n.useState)(""),[l,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[m,p]=(0,n.useState)(!1),f=async t=>{t.preventDefault(),u(""),p(!0);try{await (0,o.zB)(r,l),e.push("/dashboard")}catch(e){switch(e.code){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":case"auth/wrong-password":u("Invalid email or password");break;case"auth/too-many-requests":u("Too many failed login attempts. Please try again later.");break;default:u("An unexpected error occurred")}console.error(e),p(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Войдите в свой аккаунт"}),(0,a.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Или"," ",(0,a.jsx)(i.default,{href:"/auth/register",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"создать новый аккаунт"})]})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:f,children:[(0,a.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Эл. почта"}),(0,a.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:e=>t(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Эл. почта"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Пароль"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:l,onChange:e=>d(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Пароль"})]})]}),c&&(0,a.jsx)("div",{className:"text-red-500 dark:text-red-400 text-sm text-center",children:c}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:m,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Вход...":"Войти"})})]})]})})}},8123:function(e,r,t){"use strict";t.d(r,{a$:function(){return o},ts:function(){return c},w7:function(){return d},yv:function(){return u},zB:function(){return l}});var a=t(3301),n=t(5978),s=t(6410),i=t(925);async function o(e,r,t){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"USER";if(!s.I8||!s.db)throw Error("Firebase is not initialized");let l=(await (0,a.Xb)(s.I8,e,r)).user,d={name:t,email:e,role:o};return await (0,n.pl)((0,n.JU)(s.db,i.Ul.USERS,l.uid),d),{...d,id:l.uid}}async function l(e,r){if(!s.I8)throw Error("Firebase is not initialized");return(0,a.e5)(s.I8,e,r)}async function d(){if(!s.I8)throw Error("Firebase is not initialized");return(0,a.w7)(s.I8)}async function c(){if(!s.I8||!s.db)throw Error("Firebase is not initialized");let e=s.I8.currentUser;if(!e)return null;let r=await (0,n.QT)((0,n.JU)(s.db,i.Ul.USERS,e.uid));return r.exists()?{id:e.uid,...r.data()}:null}function u(e){if(!s.I8)throw Error("Firebase is not initialized");return(0,a.Aj)(s.I8,e)}},6410:function(e,r,t){"use strict";t.d(r,{I8:function(){return c},db:function(){return d},l2:function(){return l}});var a=t(738),n=t(5978),s=t(3301),i=t(257);let o={apiKey:"AIzaSyDpUQ4adXyWWieDcE63OnU2uLzX9C8WVyI",authDomain:"crm-system2014812.firebaseapp.com",projectId:"crm-system2014812",storageBucket:"crm-system2014812.firebasestorage.app",messagingSenderId:"281061278803",appId:"1:281061278803:web:7b2d18b0b67fcbeb1832a6",...i.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID?{measurementId:i.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID}:{}};console.log("Firebase config check:"),console.log("API Key exists:",!0),console.log("Auth Domain exists:",!0),console.log("Project ID exists:",!0),console.log("Storage Bucket exists:",!0),console.log("Messaging Sender ID exists:",!0),console.log("App ID exists:",!0);let l=null,d=null,c=null;if(o.apiKey&&o.authDomain&&o.projectId)try{l=(0,a.ZF)(o),d=(0,n.ad)(l),c=(0,s.v0)(l),console.log("Firebase initialized successfully!")}catch(e){console.error("Firebase initialization error:",e),l=null,d=null,c=null}else console.warn("Firebase configuration is missing. Please set environment variables."),o.apiKey||console.warn("Missing: NEXT_PUBLIC_FIREBASE_API_KEY"),o.authDomain||console.warn("Missing: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN"),o.projectId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_PROJECT_ID"),o.storageBucket||console.warn("Missing: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET"),o.messagingSenderId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID"),o.appId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_APP_ID")},925:function(e,r,t){"use strict";t.d(r,{OE:function(){return i},Ul:function(){return s},gU:function(){return l},iH:function(){return d},qi:function(){return o}});var a=t(5978),n=t(6410);let s={USERS:"users",CUSTOMERS:"customers",DEALS:"deals",TASKS:"tasks",NOTES:"notes",CONTACTS:"contacts"};async function i(e,r){let t=(0,a.hJ)(n.db,e);return{id:(await (0,a.ET)(t,{...r,createdAt:(0,a.Bt)(),updatedAt:(0,a.Bt)()})).id,...r}}async function o(e){let r=(0,a.hJ)(n.db,e);return(await (0,a.PL)(r)).docs.map(e=>({id:e.id,...e.data()}))}async function l(e,r,t){let s=(0,a.JU)(n.db,e,r);return await (0,a.r7)(s,{...t,updatedAt:(0,a.Bt)()}),{id:r,...t}}async function d(e,r){let t=(0,a.JU)(n.db,e,r);return await (0,a.oe)(t),{id:r}}}},function(e){e.O(0,[358,717,840,448,971,117,744],function(){return e(e.s=264)}),_N_E=e.O()}]);