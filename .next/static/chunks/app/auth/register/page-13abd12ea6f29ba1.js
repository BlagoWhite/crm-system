(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{6742:function(e,r,a){Promise.resolve().then(a.bind(a,1603))},1603:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return l}});var t=a(7437),n=a(2265),s=a(9376),i=a(7648),o=a(8123);function l(){let e=(0,s.useRouter)(),[r,a]=(0,n.useState)(""),[l,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[f,y]=(0,n.useState)(""),[g,h]=(0,n.useState)(!1),b=async a=>{if(a.preventDefault(),y(""),c!==m){y("Passwords do not match");return}if(c.length<6){y("Password must be at least 6 characters");return}h(!0);try{await (0,o.a$)(l,c,r),e.push("/dashboard")}catch(e){switch(e.code){case"auth/email-already-in-use":y("Email is already in use");break;case"auth/invalid-email":y("Invalid email address");break;case"auth/weak-password":y("Password is too weak");break;default:y("An unexpected error occurred"),console.error(e)}h(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Создайте свой аккаунт"}),(0,t.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Или"," ",(0,t.jsx)(i.default,{href:"/auth/login",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"войдите в свой существующий аккаунт"})]})]}),(0,t.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:b,children:[(0,t.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"sr-only",children:"Имя"}),(0,t.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:r,onChange:e=>a(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Имя"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email"}),(0,t.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:l,onChange:e=>d(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Эл. почта"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Пароль"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:c,onChange:e=>u(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Пароль"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Подтвердите пароль"}),(0,t.jsx)("input",{id:"confirm-password",name:"confirmPassword",type:"password",required:!0,value:m,onChange:e=>p(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white dark:bg-gray-700 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Подтвердите пароль"})]})]}),f&&(0,t.jsx)("div",{className:"text-red-500 dark:text-red-400 text-sm text-center",children:f}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:g,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Создание аккаунта...":"Зарегистрироваться"})})]})]})})}},8123:function(e,r,a){"use strict";a.d(r,{a$:function(){return o},ts:function(){return c},w7:function(){return d},yv:function(){return u},zB:function(){return l}});var t=a(3301),n=a(5978),s=a(6410),i=a(925);async function o(e,r,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"USER";if(!s.I8||!s.db)throw Error("Firebase is not initialized");let l=(await (0,t.Xb)(s.I8,e,r)).user,d={name:a,email:e,role:o};return await (0,n.pl)((0,n.JU)(s.db,i.Ul.USERS,l.uid),d),{...d,id:l.uid}}async function l(e,r){if(!s.I8)throw Error("Firebase is not initialized");return(0,t.e5)(s.I8,e,r)}async function d(){if(!s.I8)throw Error("Firebase is not initialized");return(0,t.w7)(s.I8)}async function c(){if(!s.I8||!s.db)throw Error("Firebase is not initialized");let e=s.I8.currentUser;if(!e)return null;let r=await (0,n.QT)((0,n.JU)(s.db,i.Ul.USERS,e.uid));return r.exists()?{id:e.uid,...r.data()}:null}function u(e){if(!s.I8)throw Error("Firebase is not initialized");return(0,t.Aj)(s.I8,e)}},6410:function(e,r,a){"use strict";a.d(r,{I8:function(){return c},db:function(){return d},l2:function(){return l}});var t=a(738),n=a(5978),s=a(3301),i=a(257);let o={apiKey:"AIzaSyDpUQ4adXyWWieDcE63OnU2uLzX9C8WVyI",authDomain:"crm-system2014812.firebaseapp.com",projectId:"crm-system2014812",storageBucket:"crm-system2014812.firebasestorage.app",messagingSenderId:"281061278803",appId:"1:281061278803:web:7b2d18b0b67fcbeb1832a6",...i.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID?{measurementId:i.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID}:{}};console.log("Firebase config check:"),console.log("API Key exists:",!0),console.log("Auth Domain exists:",!0),console.log("Project ID exists:",!0),console.log("Storage Bucket exists:",!0),console.log("Messaging Sender ID exists:",!0),console.log("App ID exists:",!0);let l=null,d=null,c=null;if(o.apiKey&&o.authDomain&&o.projectId)try{l=(0,t.ZF)(o),d=(0,n.ad)(l),c=(0,s.v0)(l),console.log("Firebase initialized successfully!")}catch(e){console.error("Firebase initialization error:",e),l=null,d=null,c=null}else console.warn("Firebase configuration is missing. Please set environment variables."),o.apiKey||console.warn("Missing: NEXT_PUBLIC_FIREBASE_API_KEY"),o.authDomain||console.warn("Missing: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN"),o.projectId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_PROJECT_ID"),o.storageBucket||console.warn("Missing: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET"),o.messagingSenderId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID"),o.appId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_APP_ID")},925:function(e,r,a){"use strict";a.d(r,{OE:function(){return i},Ul:function(){return s},gU:function(){return l},iH:function(){return d},qi:function(){return o}});var t=a(5978),n=a(6410);let s={USERS:"users",CUSTOMERS:"customers",DEALS:"deals",TASKS:"tasks",NOTES:"notes",CONTACTS:"contacts"};async function i(e,r){let a=(0,t.hJ)(n.db,e);return{id:(await (0,t.ET)(a,{...r,createdAt:(0,t.Bt)(),updatedAt:(0,t.Bt)()})).id,...r}}async function o(e){let r=(0,t.hJ)(n.db,e);return(await (0,t.PL)(r)).docs.map(e=>({id:e.id,...e.data()}))}async function l(e,r,a){let s=(0,t.JU)(n.db,e,r);return await (0,t.r7)(s,{...a,updatedAt:(0,t.Bt)()}),{id:r,...a}}async function d(e,r){let a=(0,t.JU)(n.db,e,r);return await (0,t.oe)(a),{id:r}}}},function(e){e.O(0,[358,717,840,448,971,117,744],function(){return e(e.s=6742)}),_N_E=e.O()}]);