(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8587:function(e,t,n){Promise.resolve().then(n.t.bind(n,7875,23)),Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,3760)),Promise.resolve().then(n.bind(n,4362)),Promise.resolve().then(n.bind(n,7526))},3760:function(e,t,n){"use strict";n.d(t,{default:function(){return s}});var r=n(7437),i=n(4362);function s(){let{error:e}=(0,i.a)();return e?(0,r.jsx)("div",{className:"fixed top-0 inset-x-0 p-4 bg-red-500 text-white z-50",children:(0,r.jsxs)("div",{className:"container mx-auto flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,r.jsx)("span",{className:"font-medium",children:"Configuration Error:"}),(0,r.jsx)("span",{children:e})]}),e&&e.includes("Firebase")&&(0,r.jsx)("div",{className:"text-sm",children:"Please set up your Firebase configuration in .env.local"})]})}):null}},4362:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return u},a:function(){return c}});var r=n(7437),i=n(2265),s=n(8123),o=n(6410);let a=(0,i.createContext)({firebaseUser:null,user:null,loading:!0,error:null});function u(e){let{children:t}=e,[n,u]=(0,i.useState)(null),[c,l]=(0,i.useState)(null),[d,f]=(0,i.useState)(!0),[m,E]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!o.l2)return f(!1),E("Firebase is not properly configured. Please check your environment variables."),()=>{};try{let e=(0,s.yv)(async e=>{if(u(e),e)try{let e=await (0,s.ts)();l(e)}catch(e){console.error("Error getting user data:",e),E("Error loading user data")}else l(null);f(!1)});return()=>e()}catch(e){return console.error("Error setting up auth listener:",e),f(!1),E("Error initializing authentication"),()=>{}}},[]),(0,r.jsx)(a.Provider,{value:{firebaseUser:n,user:c,loading:d,error:m},children:t})}function c(){return(0,i.useContext)(a)}},7526:function(e,t,n){"use strict";n.d(t,{ThemeProvider:function(){return o},F:function(){return a}});var r=n(7437),i=n(2265);let s=(0,i.createContext)(void 0);function o(e){let{children:t}=e,[n,o]=(0,i.useState)("system"),[a,u]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{u(!0),o(localStorage.getItem("theme")||"system")},[]),a)?(0,r.jsx)(s.Provider,{value:{theme:n,setTheme:e=>{o(e),function(e){let t=document.documentElement,n="dark"===e||"system"===e&&"dark"==(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");t.classList.remove("light","dark"),t.classList.add(n?"dark":"light"),localStorage.setItem("theme",e)}(e)}},children:t}):(0,r.jsx)(r.Fragment,{children:t})}function a(){let e=(0,i.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},8123:function(e,t,n){"use strict";n.d(t,{a$:function(){return a},ts:function(){return l},w7:function(){return c},yv:function(){return d},zB:function(){return u}});var r=n(3301),i=n(5978),s=n(6410),o=n(925);async function a(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"USER";if(!s.I8||!s.db)throw Error("Firebase is not initialized");let u=(await (0,r.Xb)(s.I8,e,t)).user,c={name:n,email:e,role:a};return await (0,i.pl)((0,i.JU)(s.db,o.Ul.USERS,u.uid),c),{...c,id:u.uid}}async function u(e,t){if(!s.I8)throw Error("Firebase is not initialized");return(0,r.e5)(s.I8,e,t)}async function c(){if(!s.I8)throw Error("Firebase is not initialized");return(0,r.w7)(s.I8)}async function l(){if(!s.I8||!s.db)throw Error("Firebase is not initialized");let e=s.I8.currentUser;if(!e)return null;let t=await (0,i.QT)((0,i.JU)(s.db,o.Ul.USERS,e.uid));return t.exists()?{id:e.uid,...t.data()}:null}function d(e){if(!s.I8)throw Error("Firebase is not initialized");return(0,r.Aj)(s.I8,e)}},6410:function(e,t,n){"use strict";n.d(t,{I8:function(){return l},db:function(){return c},l2:function(){return u}});var r=n(738),i=n(5978),s=n(3301),o=n(257);let a={apiKey:"AIzaSyDpUQ4adXyWWieDcE63OnU2uLzX9C8WVyI",authDomain:"crm-system2014812.firebaseapp.com",projectId:"crm-system2014812",storageBucket:"crm-system2014812.firebasestorage.app",messagingSenderId:"281061278803",appId:"1:281061278803:web:7b2d18b0b67fcbeb1832a6",...o.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID?{measurementId:o.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID}:{}};console.log("Firebase config check:"),console.log("API Key exists:",!0),console.log("Auth Domain exists:",!0),console.log("Project ID exists:",!0),console.log("Storage Bucket exists:",!0),console.log("Messaging Sender ID exists:",!0),console.log("App ID exists:",!0);let u=null,c=null,l=null;if(a.apiKey&&a.authDomain&&a.projectId)try{u=(0,r.ZF)(a),c=(0,i.ad)(u),l=(0,s.v0)(u),console.log("Firebase initialized successfully!")}catch(e){console.error("Firebase initialization error:",e),u=null,c=null,l=null}else console.warn("Firebase configuration is missing. Please set environment variables."),a.apiKey||console.warn("Missing: NEXT_PUBLIC_FIREBASE_API_KEY"),a.authDomain||console.warn("Missing: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN"),a.projectId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_PROJECT_ID"),a.storageBucket||console.warn("Missing: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET"),a.messagingSenderId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID"),a.appId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_APP_ID")},925:function(e,t,n){"use strict";n.d(t,{OE:function(){return o},Ul:function(){return s},gU:function(){return u},iH:function(){return c},qi:function(){return a}});var r=n(5978),i=n(6410);let s={USERS:"users",CUSTOMERS:"customers",DEALS:"deals",TASKS:"tasks",NOTES:"notes",CONTACTS:"contacts"};async function o(e,t){let n=(0,r.hJ)(i.db,e);return{id:(await (0,r.ET)(n,{...t,createdAt:(0,r.Bt)(),updatedAt:(0,r.Bt)()})).id,...t}}async function a(e){let t=(0,r.hJ)(i.db,e);return(await (0,r.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}async function u(e,t,n){let s=(0,r.JU)(i.db,e,t);return await (0,r.r7)(s,{...n,updatedAt:(0,r.Bt)()}),{id:t,...n}}async function c(e,t){let n=(0,r.JU)(i.db,e,t);return await (0,r.oe)(n),{id:t}}},2778:function(){},7875:function(e){e.exports={style:{fontFamily:"'__Inter_5b2c46', '__Inter_Fallback_5b2c46'",fontStyle:"normal"},className:"__className_5b2c46"}}},function(e){e.O(0,[561,358,717,840,971,117,744],function(){return e(e.s=8587)}),_N_E=e.O()}]);