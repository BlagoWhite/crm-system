"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[661],{1661:function(e,t,r){r.d(t,{Y:function(){return d}});var n=r(7437),s=r(7648),o=r(9376);r(2265);var i=r(8123),a=r(7526);function c(){let{theme:e,setTheme:t}=(0,a.F)();return(0,n.jsx)("button",{onClick:function(){t("dark"===e?"light":"dark")},className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Switch to ".concat("dark"===e?"light":"dark"," theme"),children:"dark"===e?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-yellow-300",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-700",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})})})}let l=[{name:"Главная",href:"/dashboard",icon:e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,n.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,n.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,n.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"}),(0,n.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"})]})},{name:"Клиенты",href:"/dashboard/customers",icon:e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,n.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,n.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})},{name:"Сделки",href:"/dashboard/deals",icon:e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,n.jsx)("path",{d:"M12 2v2a2 2 0 0 0 2 2h4v16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V6h4a2 2 0 0 0 2-2V2z"}),(0,n.jsx)("path",{d:"M14 2h4a2 2 0 0 1 2 2v4"}),(0,n.jsx)("path",{d:"M9 14h6"}),(0,n.jsx)("path",{d:"M9 18h6"}),(0,n.jsx)("path",{d:"M9 10h1"})]})},{name:"Задачи",href:"/dashboard/tasks",icon:e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,n.jsx)("path",{d:"M12 2v1"}),(0,n.jsx)("path",{d:"M12 21v-1"}),(0,n.jsx)("path",{d:"M4.93 4.93l.71.71"}),(0,n.jsx)("path",{d:"M18.36 18.36l.71.71"}),(0,n.jsx)("path",{d:"M2 12h1"}),(0,n.jsx)("path",{d:"M21 12h-1"}),(0,n.jsx)("path",{d:"M4.93 19.07l.71-.71"}),(0,n.jsx)("path",{d:"M18.36 5.64l.71-.71"}),(0,n.jsx)("circle",{cx:"12",cy:"12",r:"8"})]})}];function d(){let e=(0,o.usePathname)(),t=(0,o.useRouter)(),r=async()=>{try{await (0,i.w7)(),t.push("/auth/login")}catch(e){console.error("Logout failed:",e)}};return(0,n.jsxs)("div",{className:"flex flex-col h-screen w-64 bg-gray-800 dark:bg-gray-900 text-white",children:[(0,n.jsx)("div",{className:"p-5 border-b border-gray-700",children:(0,n.jsx)("h1",{className:"text-lg font-bold",children:"CRM System"})}),(0,n.jsx)("nav",{className:"flex-1 overflow-y-auto pt-5 pb-4",children:(0,n.jsx)("div",{className:"space-y-1 px-2",children:l.map(t=>{let r=e===t.href||e.startsWith("".concat(t.href,"/"));return(0,n.jsxs)(s.default,{href:t.href,className:"group flex items-center px-3 py-2 text-sm font-medium rounded-md ".concat(r?"bg-gray-900 dark:bg-gray-800 text-white":"text-gray-300 hover:bg-gray-700 dark:hover:bg-gray-800 hover:text-white"),children:[(0,n.jsx)(t.icon,{className:"mr-3 h-5 w-5 ".concat(r?"text-white":"text-gray-400 group-hover:text-gray-300"),"aria-hidden":"true"}),t.name]},t.name)})})}),(0,n.jsxs)("div",{className:"p-4 border-t border-gray-700 flex items-center justify-between",children:[(0,n.jsxs)("button",{onClick:r,className:"flex items-center text-sm font-medium text-gray-300 hover:text-white",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,n.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,n.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Выйти"]}),(0,n.jsx)(c,{})]})]})}},7526:function(e,t,r){r.d(t,{ThemeProvider:function(){return i},F:function(){return a}});var n=r(7437),s=r(2265);let o=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)("system"),[a,c]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{c(!0),i(localStorage.getItem("theme")||"system")},[]),a)?(0,n.jsx)(o.Provider,{value:{theme:r,setTheme:e=>{i(e),function(e){let t=document.documentElement,r="dark"===e||"system"===e&&"dark"==(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");t.classList.remove("light","dark"),t.classList.add(r?"dark":"light"),localStorage.setItem("theme",e)}(e)}},children:t}):(0,n.jsx)(n.Fragment,{children:t})}function a(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},8123:function(e,t,r){r.d(t,{a$:function(){return a},ts:function(){return d},w7:function(){return l},yv:function(){return u},zB:function(){return c}});var n=r(3301),s=r(5978),o=r(6410),i=r(925);async function a(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"USER";if(!o.I8||!o.db)throw Error("Firebase is not initialized");let c=(await (0,n.Xb)(o.I8,e,t)).user,l={name:r,email:e,role:a};return await (0,s.pl)((0,s.JU)(o.db,i.Ul.USERS,c.uid),l),{...l,id:c.uid}}async function c(e,t){if(!o.I8)throw Error("Firebase is not initialized");return(0,n.e5)(o.I8,e,t)}async function l(){if(!o.I8)throw Error("Firebase is not initialized");return(0,n.w7)(o.I8)}async function d(){if(!o.I8||!o.db)throw Error("Firebase is not initialized");let e=o.I8.currentUser;if(!e)return null;let t=await (0,s.QT)((0,s.JU)(o.db,i.Ul.USERS,e.uid));return t.exists()?{id:e.uid,...t.data()}:null}function u(e){if(!o.I8)throw Error("Firebase is not initialized");return(0,n.Aj)(o.I8,e)}},6410:function(e,t,r){r.d(t,{I8:function(){return d},db:function(){return l},l2:function(){return c}});var n=r(738),s=r(5978),o=r(3301),i=r(257);let a={apiKey:"AIzaSyDpUQ4adXyWWieDcE63OnU2uLzX9C8WVyI",authDomain:"crm-system2014812.firebaseapp.com",projectId:"crm-system2014812",storageBucket:"crm-system2014812.firebasestorage.app",messagingSenderId:"281061278803",appId:"1:281061278803:web:7b2d18b0b67fcbeb1832a6",...i.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID?{measurementId:i.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID}:{}};console.log("Firebase config check:"),console.log("API Key exists:",!0),console.log("Auth Domain exists:",!0),console.log("Project ID exists:",!0),console.log("Storage Bucket exists:",!0),console.log("Messaging Sender ID exists:",!0),console.log("App ID exists:",!0);let c=null,l=null,d=null;if(a.apiKey&&a.authDomain&&a.projectId)try{c=(0,n.ZF)(a),l=(0,s.ad)(c),d=(0,o.v0)(c),console.log("Firebase initialized successfully!")}catch(e){console.error("Firebase initialization error:",e),c=null,l=null,d=null}else console.warn("Firebase configuration is missing. Please set environment variables."),a.apiKey||console.warn("Missing: NEXT_PUBLIC_FIREBASE_API_KEY"),a.authDomain||console.warn("Missing: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN"),a.projectId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_PROJECT_ID"),a.storageBucket||console.warn("Missing: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET"),a.messagingSenderId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID"),a.appId||console.warn("Missing: NEXT_PUBLIC_FIREBASE_APP_ID")},925:function(e,t,r){r.d(t,{OE:function(){return i},Ul:function(){return o},gU:function(){return c},iH:function(){return l},qi:function(){return a}});var n=r(5978),s=r(6410);let o={USERS:"users",CUSTOMERS:"customers",DEALS:"deals",TASKS:"tasks",NOTES:"notes",CONTACTS:"contacts"};async function i(e,t){let r=(0,n.hJ)(s.db,e);return{id:(await (0,n.ET)(r,{...t,createdAt:(0,n.Bt)(),updatedAt:(0,n.Bt)()})).id,...t}}async function a(e){let t=(0,n.hJ)(s.db,e);return(await (0,n.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}async function c(e,t,r){let o=(0,n.JU)(s.db,e,t);return await (0,n.r7)(o,{...r,updatedAt:(0,n.Bt)()}),{id:t,...r}}async function l(e,t){let r=(0,n.JU)(s.db,e,t);return await (0,n.oe)(r),{id:t}}}}]);