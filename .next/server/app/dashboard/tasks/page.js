(()=>{var e={};e.id=276,e.ids=[276],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},61212:e=>{"use strict";e.exports=require("async_hooks")},78893:e=>{"use strict";e.exports=require("buffer")},3199:e=>{"use strict";e.exports=require("console")},84770:e=>{"use strict";e.exports=require("crypto")},27920:e=>{"use strict";e.exports=require("diagnostics_channel")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},96119:e=>{"use strict";e.exports=require("perf_hooks")},35816:e=>{"use strict";e.exports=require("process")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},66083:e=>{"use strict";e.exports=require("stream/web")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},61814:e=>{"use strict";e.exports=require("util/types")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},15673:e=>{"use strict";e.exports=require("node:events")},84492:e=>{"use strict";e.exports=require("node:stream")},47261:e=>{"use strict";e.exports=require("node:util")},75477:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>n,routeModule:()=>m,tree:()=>c}),t(82220),t(22834),t(90120),t(35866);var s=t(23191),a=t(88716),d=t(37922),i=t.n(d),l=t(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(r,o);let c=["",{children:["dashboard",{children:["tasks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,82220)),"C:\\Users\\Rafae\\Desktop\\crm-system\\src\\app\\dashboard\\tasks\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,22834)),"C:\\Users\\Rafae\\Desktop\\crm-system\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,90120)),"C:\\Users\\Rafae\\Desktop\\crm-system\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],n=["C:\\Users\\Rafae\\Desktop\\crm-system\\src\\app\\dashboard\\tasks\\page.tsx"],u="/dashboard/tasks/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/tasks/page",pathname:"/dashboard/tasks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},80288:(e,r,t)=>{Promise.resolve().then(t.bind(t,7022))},48609:(e,r,t)=>{Promise.resolve().then(t.bind(t,75543))},7022:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(10326),a=t(59033);function d({children:e}){return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-800",children:[s.jsx(a.Y,{}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx("main",{className:"p-6",children:e})})]})}},75543:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var s=t(10326),a=t(17577),d=t(94561),i=t(35047),l=t(4942);t(82094);var o=t(98187),c=t(94001),n=t(24821);function u(){(0,i.useRouter)();let{user:e}=(0,c.a)(),[r,t]=(0,a.useState)([]),[u,x]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[g,h]=(0,a.useState)(!1),[y,b]=(0,a.useState)({title:"",description:"",dueDate:null,completed:!1,priority:"medium",userId:e?.id||""}),[k,v]=(0,a.useState)({title:"",description:"",dueDate:null,completed:!1,priority:"medium",userId:e?.id||""}),j=async e=>{try{let s=r.find(r=>r.id===e);if(!s)return;await (0,o.gU)(o.Ul.TASKS,e,{completed:!s.completed}),t(r.map(r=>r.id===e?{...r,completed:!r.completed}:r))}catch(e){console.error("Error updating task completion:",e)}},f=async e=>{try{await (0,o.iH)(o.Ul.TASKS,e),t(r.filter(r=>r.id!==e))}catch(e){console.error("Error deleting task:",e)}},w=async()=>{if(""!==y.title.trim()&&e?.id)try{let s={title:y.title,description:y.description,completed:!1,userId:e.id,priority:y.priority,...y.dueDate&&{dueDate:n.EK.fromDate(y.dueDate)},...y.customerId&&{customerId:y.customerId},...y.dealId&&{dealId:y.dealId}},a=await (0,o.OE)(o.Ul.TASKS,s);t([...r,a]),b({title:"",description:"",dueDate:null,completed:!1,priority:"medium",userId:e.id}),p(!1)}catch(e){console.error("Error adding task:",e)}},N=async()=>{if(""!==k.title.trim()&&e?.id&&k.id)try{let e={title:k.title,description:k.description,completed:k.completed,priority:k.priority,...k.dueDate&&{dueDate:n.EK.fromDate(k.dueDate)},...k.customerId&&{customerId:k.customerId},...k.dealId&&{dealId:k.dealId}};await (0,o.gU)(o.Ul.TASKS,k.id,e),t(r.map(r=>r.id===k.id?{...r,...e}:r)),h(!1)}catch(e){console.error("Error updating task:",e)}},q=e=>{v({id:e.id,title:e.title,description:e.description||"",dueDate:e.dueDate?e.dueDate instanceof n.EK?e.dueDate.toDate():e.dueDate:null,completed:e.completed,priority:e.priority||"medium",userId:e.userId,customerId:e.customerId,dealId:e.dealId}),h(!0)},D=e=>{if(!e)return"No date";let r=e instanceof n.EK?e.toDate():e instanceof Date?e:null;return r?(0,d.WU)(r,"MMM d, yyyy"):"Invalid date"},C=e=>{switch(e){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}};return u?s.jsx("div",{className:"text-center p-8 dark:text-white",children:"Загрузка задач..."}):(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold dark:text-white",children:"Задачи"}),s.jsx("button",{onClick:()=>p(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md",children:"Добавить задачу"})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden p-2",children:s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700 space-y-2",children:0===r.length?s.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-md",children:"Задач нет. Создайте свою первую задачу!"}):r.map(e=>s.jsx("div",{className:`p-4 rounded-md shadow-sm border border-gray-200 dark:border-gray-600 ${e.completed?"bg-gray-100 dark:bg-gray-700":"bg-gray-50 dark:bg-gray-800"}`,children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>j(e.id),className:"mt-1 h-4 w-4 text-primary-600 rounded"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:`font-medium ${e.completed?"line-through text-gray-500 dark:text-gray-400":"dark:text-white"}`,children:e.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description}),(0,s.jsxs)("div",{className:"flex space-x-2 mt-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:D(e.dueDate)}),e.priority&&s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${C(e.priority)}`,children:e.priority})]})]})]}),(0,s.jsxs)("div",{className:"flex",children:[s.jsx("button",{onClick:()=>q(e),className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 mr-2",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("button",{onClick:()=>f(e.id),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:"Добавить задачу"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Название"}),s.jsx("input",{type:"text",value:y.title,onChange:e=>b({...y,title:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"Название задачи"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Описание"}),s.jsx("textarea",{value:y.description,onChange:e=>b({...y,description:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"Описание задачи",rows:3})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Дата завершения"}),s.jsx(l.ZP,{selected:y.dueDate,onChange:e=>b({...y,dueDate:e}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholderText:"Выберите дату завершения"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Приоритет"}),(0,s.jsxs)("select",{value:y.priority,onChange:e=>b({...y,priority:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"high",children:"Высокий"}),s.jsx("option",{value:"medium",children:"Средний"}),s.jsx("option",{value:"low",children:"Низкий"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[s.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Отменить"}),s.jsx("button",{onClick:w,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Добавить задачу"})]})]})}),g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:"Редактировать задачу"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Название"}),s.jsx("input",{type:"text",value:k.title,onChange:e=>v({...k,title:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"Название задачи"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Описание"}),s.jsx("textarea",{value:k.description,onChange:e=>v({...k,description:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"Описание задачи",rows:3})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Дата завершения"}),s.jsx(l.ZP,{selected:k.dueDate,onChange:e=>v({...k,dueDate:e}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholderText:"Выберите дату завершения"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Приоритет"}),(0,s.jsxs)("select",{value:k.priority,onChange:e=>v({...k,priority:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"high",children:"Высокий"}),s.jsx("option",{value:"medium",children:"Средний"}),s.jsx("option",{value:"low",children:"Низкий"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Статус"}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:k.completed,onChange:e=>v({...k,completed:e.target.checked}),className:"h-4 w-4 text-primary-600 rounded"}),s.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"Выполнено"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[s.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Отменить"}),s.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Save Changes"})]})]})})]})}},22834:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`C:\Users\Rafae\Desktop\crm-system\src\app\dashboard\layout.tsx#default`)},82220:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`C:\Users\Rafae\Desktop\crm-system\src\app\dashboard\tasks\page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[92,21,496,907,453,241],()=>t(75477));module.exports=s})();